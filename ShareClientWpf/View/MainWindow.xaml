<local:WindowBase
    x:Class="ShareClientWpf.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:ShareClientWpf"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="ShareClientWpf"
    Width="800"
    Height="450"
    BorderBrush="{Binding RelativeSource={RelativeSource Self}, Path=ThemeBrush}"
    Style="{StaticResource DefaultWindowStyle}"
    mc:Ignorable="d">

    <Window.DataContext>
        <local:MainWindowViewModel />
    </Window.DataContext>

    <Grid>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <local:TitleBarContent>

            <local:MenuHeader
                Grid.Column="0"
                Width="64"
                Background="{StaticResource HeaderBackGround}"
                Foreground="{StaticResource HeaderForeGround}"
                IconHeight="36"
                IconWidth="32"
                MenuButtonClick="MenuHeader_MenuButtonClick"
                MouseOverFill="{StaticResource ButtonMouseOver}"
                Orientation="Vertical" />

        </local:TitleBarContent>

        <Grid Grid.Column="1">

            <Grid.RowDefinitions>
                <RowDefinition Height="52" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <StackPanel
                Grid.Row="0"
                Margin="8"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Panel.ZIndex="1"
                Orientation="Horizontal">

                <StackPanel.Resources>

                    <Geometry x:Key="Close">M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z</Geometry>

                    <Style TargetType="local:IconButton">
                        <Setter Property="Width" Value="24" />
                        <Setter Property="Height" Value="24" />
                        <Setter Property="Background" Value="{StaticResource WindowBackGround}" />
                        <Setter Property="Foreground" Value="{StaticResource ButtonForeGround}" />
                    </Style>
                    <Style TargetType="ToolTip">
                        <Setter Property="Background" Value="{StaticResource WindowBackGround}" />
                        <Setter Property="Foreground" Value="{StaticResource ButtonForeGround}" />
                    </Style>

                </StackPanel.Resources>

                <local:IconButton
                    x:Name="CloseButton"
                    Click="CloseButton_Click"
                    Content="{StaticResource Close}">
                    <Button.ToolTip>
                        <ToolTip Content="終了" />
                    </Button.ToolTip>
                </local:IconButton>

            </StackPanel>

            <Image
                Grid.RowSpan="2"
                HorizontalAlignment="Center"
                Source="{Binding Source, Mode=OneWay}"
                Stretch="Fill" />

            <local:OverlayDialog
                Grid.RowSpan="2"
                DialogHeight="350"
                DialogWidth="450"
                Visibility="{Binding SendDialogVisibility, Mode=TwoWay}">
                <local:SendDialog />
            </local:OverlayDialog>

        </Grid>

    </Grid>

</local:WindowBase>
